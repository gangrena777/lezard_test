!function(t){"function"==typeof define&&define.amd?define("tinymce",t):t()}(function(){"use strict";var o;o=jQuery,tinymce.create("tinymce.plugins.blockquote_button_plugin",{init:function(a,t){a.addButton("col_6",{title:"Колоки 1/2",cmd:"col_6_command",image:t+"/../../images/admin/col-6-6.png"}),a.addButton("col_4",{title:"Колоки 1/3",cmd:"col_4_command",image:t+"/../../images/admin/col-4-4-4.png"}),a.addButton("blockquote_warning",{title:"Цитата с восклицательным знаком",cmd:"blockquote_warning_command",image:t+"/../../images/admin/blockquote-warning-ico.png"}),a.addButton("blockquote_info",{title:"Цитата с знаком i",cmd:"blockquote_info_command",image:t+"/../../images/admin/blockquote-info-ico.png"}),a.addButton("blockquote_danger",{title:"Цитата с красным крестом",cmd:"blockquote_danger_command",image:t+"/../../images/admin/blockquote-danger-ico.png"}),a.addButton("blockquote_check",{title:"Цитата с галочкой",cmd:"blockquote_check_command",image:t+"/../../images/admin/blockquote-check-ico.png"}),a.addButton("blockquote_quote",{title:"Цитата с кавычкой",cmd:"blockquote_quote_command",image:t+"/../../images/admin/blockquote-quote-ico.png"}),a.addButton("content_btn",{title:"Добавить кнопку",image:t+"/../../images/admin/tinymce-button.png",onclick:function(){a.windowManager.open({title:"Вставить кнопку",body:[{type:"textbox",name:"text",label:"Текст кнопки"},{type:"textbox",name:"href",label:"Ссылка"},{type:"listbox",name:"hide_link",label:"Скрыть ссылку",values:[{text:"Скрыть",value:"yes"},{text:"Не скрывать",value:"no"}]},{type:"colorbox",name:"background_color",label:"Цвет фона",onaction:e()},{type:"colorbox",name:"color",label:"Цвет текста",onaction:e()},{type:"listbox",name:"size",label:"Размер",values:[{text:"Маленькая",value:"small"},{text:"Средняя",value:"normal"},{text:"Большая",value:"big"}]},{type:"listbox",name:"target",label:"Открыть ссылку",values:[{text:"В этой вкладке",value:"_self"},{text:"В новой вкладке",value:"_blank"}]}],onsubmit:function(t){var e="";0===t.data.text.length&&(t.data.text="Button"),0!==t.data.background_color.length&&(e+=' background_color="'+t.data.background_color+'"'),0!==t.data.color.length&&(e+=' color="'+t.data.color+'"'),a.insertContent('[button href="'+t.data.href+'" hide_link="'+t.data.hide_link+'" '+e+' size="'+t.data.size+'" target="'+t.data.target+'"]'+t.data.text+"[/button]")}})}}),a.addButton("spoiler_btn",{title:"Спойлер",cmd:"spoiler_btn_command",image:t+"/../../images/admin/spoiler-ico.png"}),a.addButton("mask_link",{title:"Замаскировать ссылку",cmd:"mask_link_command",image:t+"/../../images/admin/link.png"}),a.addCommand("col_6_command",function(){var t=a.selection.getContent({format:"html"});0===t.length&&(t="текст");t="[root-col-6-start]"+t+" [/root-col-6-start][root-col-6-end][/root-col-6-end]";a.execCommand("mceInsertContent",0,t)}),a.addCommand("col_4_command",function(){var t=a.selection.getContent({format:"html"});0===t.length&&(t="текст");t="[wpshop-col-4-start]"+t+" [/wpshop-col-4-start][wpshop-col-4-end][/wpshop-col-4-end]";a.execCommand("mceInsertContent",0,t)}),a.addCommand("blockquote_warning_command",function(){var t="<blockquote class='warning'>"+a.selection.getContent({format:"html"})+"</blockquote>";a.execCommand("mceInsertContent",0,t)}),a.addCommand("blockquote_info_command",function(){var t="<blockquote class='info'>"+a.selection.getContent({format:"html"})+"</blockquote>";a.execCommand("mceInsertContent",0,t)}),a.addCommand("blockquote_danger_command",function(t,e){var o="<blockquote class='danger'>"+a.selection.getContent({format:"html"})+"</blockquote>";a.execCommand("mceInsertContent",0,o)}),a.addCommand("blockquote_check_command",function(t,e){var o="<blockquote class='check'>"+a.selection.getContent({format:"html"})+"</blockquote>";a.execCommand("mceInsertContent",0,o)}),a.addCommand("blockquote_quote_command",function(t,e){var o="<blockquote class='quote'>"+a.selection.getContent({format:"html"})+"</blockquote>";a.execCommand("mceInsertContent",0,o)}),a.addCommand("mask_link_command",function(t,e){var o,n=a.selection.getContent({format:"raw"});""!==n?""!==(o=jQuery.trim(prompt("Введите адрес ссылки")))?a.execCommand("mceInsertContent",0,'[mask_link]<a href="'+o+'" target="_blank">'+n+"</a>[/mask_link]"):alert("Необходимо указать адрес ссылки"):alert("Необходимо выделить текст ссылки")}),a.addCommand("spoiler_btn_command",function(){var t,e,o=a.selection.getContent({format:"html"});0!==o.length?(e=' title="'+(t=prompt("Введите заголовок спойлера или оставьте пустым"))+'"',0===t.length&&(e=""),a.execCommand("mceReplaceContent",!1,"[spoiler"+e+"]"+o+"[/spoiler]")):alert("Выделите текст для спойлера")}),a.addButton("mark_btn",{title:"Выделить текст",image:t+"/../../images/admin/tinymce-mark.png",onclick:function(){var t,e=a.selection.getContent({format:"html"});0!==e.length?(t="<mark>"+e+"</mark>",a.execCommand("mceInsertContent",0,t)):(e='<div class="wpshop-mark-btn-textarea"><textarea placeholder="Введите текст">'+e+"</textarea></div>",a.windowManager.open({title:"Вставить выделенный текст",cmd:"mark_btn_command",html:e,height:170,buttons:[{text:"OK",subtype:"primary",onclick:function(){var t=a.selection.getContent({format:"html"});0!==(t=o(".wpshop-mark-btn-textarea textarea").val()).length&&(t="<mark>"+t+"</mark>",a.execCommand("mceInsertContent",0,t)),tinymce.activeEditor.windowManager.close()}},{text:"Отмена",onclick:"close"}]}))}})},createControl:function(t,e){return null},getInfo:function(){return{longname:"Extra Buttons",author:"WPShop.biz",version:"1"}}}),tinymce.PluginManager.add("blockquote_button_plugin",tinymce.plugins.blockquote_button_plugin);var n=tinymce.activeEditor;function e(){var t=n.settings.color_picker_callback;if(t)return function(){var e=this;t.call(n,function(t){e.value(t).fire("change")},e.value())}}});